> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.joinquant.com](https://www.joinquant.com/view/community/detail/a9ad41471aa3f2949d9dbd81470f9d6b?type=1)

止损又叫 “割肉”， 指的是当一个投资组合亏损达到一定比例 及时清仓出局， 以免形成更大的亏损的行为。 止盈是指当盈利大于一定数额， 及时获利了结。

华尔街有一句话： 让损失减少，让利润飞驰。

我们用一组数字来说明止损的重要性， 假设你的资金没有杠杆，从 10w 亏损至 5w ，资金缩水 50%。 但是从 5w 增长至 10w 需要盈利 100% 才行。假设你的资金有 1:2 的杠杆，若没有阻止亏损，在亏损达到 30% 左右，对不起，你爆仓啦。 所以如何卖？在什么时候卖？ 是我们必须要深思熟虑的问题。 由于 A 股市场散户居多， 无论跌涨都会束手无策。经常心里想一套， 手上做一套。 人性的缺点在市场上会被无限放大，这时候就需要程序化交易来弥补人性的缺点。 在百度上随手一搜都能搜出很多止损方案， 但是这些止损方案可不可行? 有什么优缺点呢？

在这里提供了几个简单的止损方案。 为了获得更好的止损效果， 我建议将调仓频率设置为月调仓。

接下来是各个止损方案的介绍。

**时间止损**  
时间止损认为时间是有价值的，若在一定的时间内某股票的回报收益低于一个预设值就认为该交易低于预期，选择卖出。 这是一个非常简单的止损策略， 由于止损线是固定的， 所以不能很好的减少回撤。若不是专门研究时间止损， 不建议使用。

if 持仓时间 > X 天 and 区间涨幅 小于 Y% ：  
卖出止损  
else ：  
继续持有

**限价止损**  
限价止损 将买入价设置为基准价， 一旦股价上涨大于 X% 或下跌大于 Y% 就卖出该股。这是也是一个固定止损 / 止盈价位的止损方案， 和时间止损存在相同问题：不能有效减少回撤。

if 现价 >(1+X%) _买入价：  
卖出 止盈  
else if 现价 <(1-Y%)_ 买入价：  
卖出止损  
else ：  
继续持有

**跟踪止损**  
跟踪止损 考虑的是该股的回撤， 若回撤大于某预设值 X% 就将其卖出。 此方案的止损价会随着最高价的变化而变化， 在股灾和熔断中有很好的表现。

X = 允许最大回撤  
if 现价 <持股周期内最高价 *(1-X %):  
卖出止损  
else ：  
继续持有

**阶梯止损**  
阶梯止损是一种 动态止损策略。 止损价会根据持股周期内最高价的变化而变化。 和跟踪止损的思路类似， 但是止损价的计算方式略有不同， 股灾期间表现良好。 但不及阶梯止损。

止损价 = fx(买入后最高价， 初始止损价 ，阶梯长度，阶梯变化率)  
if 现价 < 止损价 ：  
卖出止损  
else ：  
继续持有

**时间 + 阶梯 止损**  
时间 + 阶梯 止损是将 “时间有价值” 和 “动态止损” 这两个思路结合在一起的策略。 止损价会随着 持股周期的变化而变化， 一旦跌破止损价，则卖出。 良好的止损策略。

止损价 =fx (持股周期， 期望回报率)  
if 现价 < 止损价：  
卖出止损

**ATR 止损**  
ATR 止损 会先计算 一个叫做平均真实波幅 (Average True Range) 的指标， ATR 止损是根据这一指标发散出来编写的策略。

Raw_ATR=max(| 今日振幅 |， | 昨天收盘 - 今日最高价 |，| 昨天收盘 - 今日最低价 |)# 未处理 ATR = 这三个指标的最大值  
ATR=moving_average (ATR ,N) #真实 ATR 为 Raw_ATR 的 N 日简单移动平均, 默认 N=22

**熔断止损**

如果大盘跌幅过大， 相当于检测到系统性风险， 于是卖出所有股票，暂停交易出去旅游。

if 今日最低值 / 今日最高值 < 0.96:  
清仓止损  
暂停交易 20 天