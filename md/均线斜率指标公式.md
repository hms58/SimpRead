> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.360doc.com](http://www.360doc.com/content/25/0216/20/65802120_1146929562.shtml)

> 均线斜率指标公式

均线斜率，实际上是均线的角度。

**一、ATAN 函数**

含义：求反正切值

使用方法：ATAN(X) 获得 X 的反正切值，求得的反正切值是弧度制，为了方便理解，一般会转换成角度制。1 弧度 = 180/π，约等于 57.3 度。π约等于 3.14115926，编写指标的时候，换算一般写为 180/3.14115926。![](http://image109.360doc.com/DownloadImg/2025/02/1620/294398097_1_20250216084017167_wm.png)

根据斜率的定义，直线对 x 轴的倾斜角的正切值 tanθ为该直线的斜率。如果我们知道了正切值 tanθ，通过反正切函数 ATAN 就可以求得θ的角度。θ角度的取值范围在（-90°，90°）度之间。

但是在交易软件上，x 轴是周期，y 轴是价格，x、y 值单位不同，没有可比性。我们通过下面两张图，可以发现问题所在。对于同样一段行情，当这一段行情放大的时候，我们一眼看上去，均线角度可能是 45°。如果把这一段行情缩小，均线的角度发生了明细的变化，显然大于 45°。这样均线的角度就没有意义，因为会随着 K 线图的放大缩小而产生变化。

使用通达信编程语言编写均线的角度，常用均线的涨跌幅来近似替代正切值 tan。

ZF:=(MA5/REF(MA5,1)-1)*100;

当均线涨幅为 1%，ZF 等于 1，这时候求得的角度 JD 就是 45 度。但是每天的涨幅是有极限的，以主板涨停 10% 为例，即使连续涨停，ZF 的最大值也就是 10，计算得到 JD 最大值 84.289。

![](http://image109.360doc.com/DownloadImg/2025/02/1620/294398097_2_20250216084017276_wm.png)

> MA5:=MA(C,5);
> 
> ZF:=(MA5/REF(MA5,1)-1)*100;
> 
> JD:ATAN(ZF)*180/3.14115926;

每当股价要上涨的时候 5 日均线将拐头上翘，今天做了一个 5 日均线刚刚上翘的一个选股公式，这只是一个小小的选股器，简单实用。第 2 个公式 5 日上翘 1，选出的是已经上翘的。

**1、5 日均线刚刚上翘**

A:=(ATAN((MA5/REF(MA5,1)-1)*100)*180/3.14115926);

XG:REF(A<0,1) AND A>0;

**2、5 日均线已上翘**

A:=(ATAN((MA5/REF(MA5,1)-1)*100)*180/3.14115926);

A>0;